# ---------------------------------------------------------------------------
#           [incr Tcl] - Object-oriented programming in Tcl
# ---------------------------------------------------------------------------
# This file is a Makefile for [incr Tcl].  If it has the name "Makefile.in"
# then it is a template for a Makefile; to generate the actual Makefile,
# run "./configure", which is a configuration script generated by the
# "autoconf" program (constructs like "@foo@" will get replaced in the
# actual Makefile.
# ---------------------------------------------------------------------------
ROOTNAME = @ROOTNAME@
VERSION  = @VERSION@
PACKAGE  = $(ROOTNAME)-$(VERSION)

# ---------------------------------------------------------------------------
# Things you can change to personalize the Makefile for your own site.
# (You can make these changes in either Makefile.in or Makefile, but
# changes to Makefile will get lost if you re-run the configuration script.)
# ---------------------------------------------------------------------------
# INSTALLATION DIRECTORIES
# ---------------------------------------------------------------------------

# Top-level directory in which to install machine-independent files:
prefix = /usr/local

# Directory for Tcl library files:
LIBRARY_DIR = $(prefix)/library

# ---------------------------------------------------------------------------
# The information below is modified by the configure script when Makefile
# is generated from Makefile.in.  You shouldn't normally modify any of
# this stuff by hand.
# ---------------------------------------------------------------------------

INSTALL =       @INSTALL@
INSTALL_PROGRAM =   @INSTALL_PROGRAM@
INSTALL_DATA =      @INSTALL_DATA@
SRC_DIR =		@srcdir@
VPATH =			@srcdir@

# ---------------------------------------------------------------------------
# The information below should be usable as is.  The configure script
# won't modify it and you shouldn't need to modify it either.
# ---------------------------------------------------------------------------

all:

install:
	@for i in $(LIBRARY_DIR) ; do \
		if [ ! -d $$i ] ; then \
			echo "Making directory $$i"; \
			mkdir $$i; \
			chmod 755 $$i; \
		else true; \
		fi; \
    done;
	@cd $(SRC_DIR); for i in *.tcl; do \
		echo "Installing $$i"; \
		rm -f $(LIBRARY_DIR)/$$i; \
		$(INSTALL_DATA) $$i $(LIBRARY_DIR); \
		chmod 444 $(LIBRARY_DIR)/$$i; \
		done;
	@echo "updating tclIndex for library files..."
	@HERE=`pwd`; cd $(LIBRARY_DIR); \
		echo "source $$HERE/itcl_mkindex.tcl; itcl_mkindex . *.tcl" \
			| $$HERE/../src/itcl_sh;

Makefile: $(SRC_DIR)/Makefile.in
	$(SHELL) config.status

clean:
	rm -f *.a *.o core errs *~ \#* TAGS *.E a.out errors

distclean: clean
	rm -f Makefile config.status
