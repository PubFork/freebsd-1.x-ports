#!/usr/local/bin/dpwish -f
set zircon(lib) /usr/local/lib/zircon
#
#	ZIRCON - an X11 interface to the Internet Relay Chat
#
#	Written by
#		Lindsay (Lindsay F. Marshall)
#		Jimbles (Jon Harley)
#
#	Copyright (c) 1993
#
#	See the file COPYRIGHT for details
#
lappend auto_path $zircon(lib)/lib

if ![string match "7*" [info tclversion]] {
    proc dp_connect args { eval connect $args }
    proc dp_filehandler args { eval filehandler $args }
    proc dp_address args { eval address $args }
    proc dp_accept args { eval accept $args }
    proc dp_shutdown args {eval shutdown $args }
    proc raise args { }
    proc pid {} { return 42 }
}
#
InitGlobals
makeControl
makeInfo
setNickname $nickname
#
# save some space!!!
#
rename InitGlobals ""
rename makeControl ""
rename makeInfo ""
set ix 0
set srv $server
set prt $ircport
while {$server != {} && ![startIRC $server $ircport]} {
    while {$srv == $server && $prt == $ircport} {
	set sx [lindex $servers $ix]
	set srv [lindex $sx 0]
	if {[set prt [lindex $sx 1]] == {}} { set prt $defaultPort }
	incr ix
    }
    set server $srv
    set ircport $prt
    update
}
