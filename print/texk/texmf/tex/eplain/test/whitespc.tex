\ifx\eplain\undefined \input eplain \fi

\vbox{\obeywhitespace Does it work in  vbox    ?}

This is some normal text, in a normal paragraph, that's been indented in
the normal way.  Isn't that nice? The lines after the first aren't
indented, as usual.

This line is the start of a paragraph; the obeyed material is next.  And
it continues on the same line.
{\obeywhitespace This is   the   start of the obeyed stuff.
  And this one by a couple spaces more than the indentation.
Back to the normal indentation---   some extra space there, did you notice?
That's   it.
}
This is the end of the paragraph with the obeyed stuff, and it shouldn't
be indented, but it should start at the beginning of the line, since it
continues the paragraph.

{\obeywhitespace This  obeyed  material starts a paragraph.
That line should have the normal   indentation (so should this one).
And this line ends with the closing   brace to the group.}
And this line continues the paragraph.

{\obeywhitespace
Some   more   obeyed material (and a newline after the control sequence):

That was a   blank   line above.
}

That time no normal stuff continued the paragraph. It shouldn't have
made any difference.
Some more normal text, with spaces   treated     normally again.

Here is some {\obeywhitespace obeyed   stuff} in the middle of a line.
And this {\obeywhitespace       more stuff} has multiple spaces before
the `more', that should be ignored.

{\blanklineskipamount = -.5\baselineskip
\obeywhitespace The blank line after this line

should be half as much as the blank lines above and below.
}

{\obeywhitespace And now we should be

back to normal.}

\bye
