%Date: Tue, 30 Nov 93 12:07 GMT
%From: NAGFLM@vax.nag.co.uk
%To: KARL <KARL@EDU.UMB.CS>
%Subject: Can you help?
%
%Hello Karl,
%
%After having spent all the time typing in the macro for \doublecolumns it 
%didn't work. I got the macro from the book ``TeX for the Impatient'', 
%ISBN 0-201-51375-7, starting on page 309. 
%
%I am including the file in the hope you can help us getting it to work. 
%
%Many thanks in advance.
%
%Regards,
%
%Margit Kail
%NAG Ltd.
%
%*****************************************************************************  
%
\def\new{new document of same name}
\hsize=160mm
\vsize=247mm
%\nopagenumbers
\newcount\instno
%\instno=0
\def\inst{\global\advance
\instno by 1
\hfil\the\instno.}
%
%\catcode`\@=11
%\newskip\abovedoublecolumnskip
%\newskip\belowdoublecolumnskip
%\abovedoublecolumnskip = \bigskipamount
%\belowdoublecolumnskip = \bigskipamount
%\newdimen\gutter \gutter = 2pc
%\newdimen\doublecolumnhsize \doublecolumnhsize = \hsize
%\newbox\@partialpage \newdimen\singlecolumnhsize
%\newdimen\singlecolumnvsize \newtoks\previousoutput
%\def\doublecolumns{\par 
%\previousoutput = \expandafter{\the\output}
%\advance\doublecolumnhsize by -\gutter
%\divide\doublecolumnhsize by 2
%\output = {\global\setbox\@partialpage =
%\vbox{\unvbox255\vskip\abovedoublecolumnskip}}
%\pagegoal = \pagetotal \break 
%\output = {\doublecolumnoutput}
%\singlecolumnhsize = \hsize
%\singlecolumnvsize = \vsize
%\hsize = \doublecolumnhsize \vsize = 2\vsize}%
%
%\def\@doublecolumnsplit{%
%\splittopskip = \topskip \splitmaxdepth = \maxdepth
%\dimen0 = \singlecolumnvsize
%\advance\dimen0 by -\ht\@partialpage
%\advance\dimen0 by -\ht\footins
%\advance\dimen0 by -\skip\footins
%\advance\dimen0 by -\ht\topins
%\begingroup
%\vbadness = 10000
%\global\setbox1=\vsplit255 to \dimen0 \wd1=\hsize
%\global\setbox3=\vsplit255 to \dimen0 \wd3=\hsize
%\endgroup
%\global\setbox4=\vbox{\unvbox255
%\penalty\outputpenalty}%
%\global\setbox255=\vbox{\unvbox\@partialpage
%\hbox to \singlecolumnhsize{\box1\hfil\box3}%
%\vfill}}%
%
%\def\doublecolumnoutput{\@doublecolumnsplit
%\hsize = \singlecolumnhsize \vsize = \singlecolumnvsize
%\previousoutput \unvbox4}%
%
%\def\singlecolumn{\par
%\output = {\global\setbox1 =
%\vbox{\unvbox255\vskip\abovedoublecolumnskip}}%
%\pagegoal = \pagetotal \break \setbox255 = \box1
%{\singlecolumnvsize = \ht255
%\divide\singlecolumnvsize by 2
%\advance\singlecolumnvsize by +\ht\@partialpage
%\advance\singlecolumnvsize by +\ht\footins
%\advance\singlecolumnvsize by +\skip\footins
%\advance\singlecolumnvsize by +\ht\topins
%\@doublecolumnsplit}%
%\hsize = \singlecolumnhsize
%\vsize = \singlecolumnvsize 
%\output = \expandafter{\the\previousoutput}%
%\unvbox255}%
%\catcode`\@=12
%
%\singlecolumn
%
\input eplain

To update NAG C Library Manual from Mark 2 to Mark 3, the instructions given 
below should be followed. Documents that are replaced or withdrawn should be 
put to one side and then checked against the `Throwaway List'.

\doublecolumns

%\halign{\hfill#$\>$&#\hfill&#\hfill\cr
\settabs\+ 10. $\>$ & Replace & \cr
\+\inst & Replace & Title Page, Release 2 \cr
   \+ & by      & Title Page, Release 3 \cr
\+\inst & Replace & Copyright Page \cr
   \+ & by & \new \cr
\+\inst & Replace & Contents \cr
   \+ & by & \new \cr
\+\inst & Replace & Introduction \cr
   \+ & by & \new \cr
\+\inst & Replace & Mark 2 News \cr
   \+ & by & Mark 3 News \cr
\+\inst & Replace & Library Contents \cr
   \+ & by & \new \cr 
\+\inst & Replace & Chapter List \cr
   \+ & by & \new \cr
\+\inst & Replace & Introduction --- d02 \cr
   \+ & by & \new \cr
\+\inst & Replace & d02cjc \cr
   \+ & by & \new \cr
\+\inst & After & d02cjc \cr
\+    & Insert & d02ejc \cr
\+    &        & d02gac \cr
\+    &        & d02gbc \cr
\+    &        & d02pcc \cr
\+    &        & d02pdc \cr
\+    &        & d02ppc \cr
\+    &        & d02pvc \cr
\+    &        & d02pwc \cr
\+    &        & d02pxc \cr
\+    &        & d02pzc \cr
\+\inst & After & d02qzc \cr
\+    & Insert & d02rac \cr
\+\inst & Replace & Introduction --- e01 \cr
    \+ & by & \new \cr
\+\inst & After & e01dac \cr
\+    & Insert & e01sac \cr
\+    &        & e01sbc \cr
\+    &        & e01szc \cr
\+\inst & Replace & Introduction --- f \cr
    \+ & by & \new \cr
\+\inst & Replace & Introduction --- g02 \cr
    \+ & by & \new \cr
\+\inst & After & Introduction --- g02 \cr
\+    & Insert & g02brc \cr
\+    &        & g02bxc \cr
\+    &        & g02cac \cr
\+    &        & g02cbc \cr
\+\inst & After & Introduction --- g05 \cr
    \+ & by & \new \cr
\+\inst & After & g05edc \cr
\+    & Insert & g05ehc \cr
\+    &        & g05ejc \cr
\+\inst & After & g05ffc \cr
\+    & Insert & g05hac \cr
\+\inst & After & g07dac \cr
\+    & Insert & Coloured Divider g10 --- \cr
\+    &        & Smoothing in Statistics \cr
\+    &        & Introduction --- g10 \cr
\+    &        & g10cac \cr
\+\inst & Replace & Introduction --- g13 \cr
    \+ & by & \new \cr
\+\inst & After & g13bzc \cr
\+    & Insert & g13eac \cr
\+    &        & g13ebc \cr
\+    &        & g13ecc \cr
\+    &        & g13edc \cr
\+    &        & g13ewc \cr
\+    &        & g13exc \cr
\+\inst & After & g13xzc \cr
\+    & Insert & Coloured Divider h --- \cr
\+    &        & Operations Research \cr
\+    &        & Introduction --- h \cr
\+    &        & h03abc \cr
\+\inst & Replace & Keywords in Context \cr
   \+ & by & \new \cr

\singlecolumn

Here is some more text to go right across the width of the page.

\bye
